<html lang="en"><head><meta charSet="utf-8"/><title>TC39 Proposal: Types as Comments</title><meta name="description" content="Reserve a space for static type syntax inside the ECMAScript language. JavaScript engines would treat type syntax as comments."/><meta property="og:title" content="TC39 Proposal: Types as Comments"/><meta property="og:type" content="article"/><meta property="og:image:type" content="image/png"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image" content="https://confident-galileo-43471d.netlify.app/assets/og-image.png"/><link rel="icon" type="image/png" href="./assets/favicon.png"/><meta name="twitter:site" content="@tc39"/><meta name="twitter:creator" content="@tc39"/><meta name="theme-color" content="#fc7c00"/><meta name="msapplication-TileColor" content="#fc7c00"/><meta name="viewport" content="width=device-width, initial-scale=1"/><style id="style">@font-face{font-family:"PT Sans Bold";src:url("./assets/PT_Sans/PTSans-Bold.ttf") format("ttf")}@font-face{font-family:"PT Serif";src:url("./assets/PT_Serif/PTSerif-Regular.ttf") format("ttf")}html{background:#f9eee6}body{max-width:880px;margin:4rem auto;font-size:16px;line-height:22px;font-family:"PT Serif",Georgia,"Times New Roman",Times,serif}@media(max-width: 879px){body{margin:1rem}}.section{margin-bottom:2rem}.section ul{padding-left:.6rem}code{font-size:.8rem;line-height:1.2rem}hr{background:#fc7c00;border:none;height:3px}.split{display:flex;width:100%}.split .reverse{flex-direction:row-reverse}.split>div{flex:1;width:50%}.split>article{flex:1}@media(max-width: 879px){.split{flex-direction:column}.split>div{width:auto}}@media(min-width: 879px){.split>*{margin:0 20px}.split>:first-child{margin-left:0}.split>:last-child{margin-right:0}}.two-thirds{font:"PT Sans",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif}.two-thirds p{font-size:1.2rem;line-height:1.8rem}@media(min-width: 879px){.two-thirds{display:flex}.two-thirds .one{margin-left:10%;width:20%;display:flex;align-items:center;justify-content:center}.two-thirds .two{width:55%;margin-right:15%}}@media(min-width: 879px){.one-column-center{width:50%;margin:0 auto}}h1,h2,h3,h4{font-family:"PT Sans",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;text-align:center}h2{margin-top:120px}aside{max-width:400px;text-align:center;margin:0 auto;font-style:oblique;margin-bottom:50px}aside a{color:#000}h1{padding-top:4px;font-size:1rem}h1 em{color:#706b67}h2::after{content:"";margin:20px auto;display:block;max-width:400px;height:2px;background:#fc7c00}.question{font-family:"PT Sans",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;color:#d17924;text-align:center;font-size:1.2rem}p>code{background-color:#f5dac2;display:inline-block;border-radius:4px;color:#222}.faq{display:flex;flex-wrap:wrap}@media(max-width: 879px){.faq{width:100%}.faq>div{margin-bottom:4rem}}@media(min-width: 879px){.faq>div:nth-child(odd){margin-right:20px}.faq>div:nth-child(even){margin-left:20px}.faq>div{width:calc(50% - 40px);margin-bottom:2rem}}#site-header{display:flex;margin:4rem auto;justify-content:center}#site-header #logo{flex-direction:column;display:flex;justify-content:center;margin-right:20px}#site-header div>*{margin:0;text-align:left;font-weight:normal;font-size:1.3rem;font-family:"PT Sans",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif}a.button{color:#000;background-color:#FC7C0020;text-decoration:none;padding:10px;margin-bottom:20px;border-left:2px solid #fc7c00;font-size:1rem}a.button h5{font-size:1.1rem;margin:.4rem 0}a.button p{margin:0}a.button:hover{background-color:#FC7C0010}.code-sample{position:relative}.code-sample h4.code-title{margin-bottom:-8px;text-align:left}.code-sample .emoji{position:absolute;bottom:-8px;right:0px}.code-after{margin-top:-2.2rem;text-align:right;opacity:.5}pre{background-color:#f9eee6 !important;color:#000;padding:12px 0;border-left:1px solid #444;border-bottom:1px solid #444;margin-bottom:3rem;overflow-x:auto;position:relative}pre.shiki{overflow-x:auto}pre.shiki:hover .dim{opacity:1}pre.shiki div.dim{opacity:.5}pre.shiki div.dim,pre.shiki div.highlight{margin:0;padding:0}pre.shiki div.highlight{opacity:1;background-color:#f1f8ff}pre.shiki div.line{min-height:1rem}pre.shiki .language-id{display:none}pre.twoslash:hover data-lsp{border-color:#747474}pre.twoslash data-lsp:hover::before{content:attr(lsp);position:absolute;transform:translate(0, 1rem);background-color:#3f3f3f;color:#fff;text-align:left;padding:5px 8px;border-radius:2px;font-family:"JetBrains Mono",Menlo,Monaco,Consolas,Courier New,monospace;font-size:14px;white-space:pre-wrap;z-index:100}pre .code-container{overflow:auto}@media(prefers-reduced-motion: reduce){pre .code-container>a{transition:none}}pre .code-container>a:hover{color:#fff;background-color:#719af4}pre .code-container:hover a{opacity:1}pre code{font-family:"JetBrains Mono",Menlo,Monaco,Consolas,Courier New,monospace;white-space:pre;-webkit-overflow-scrolling:touch}pre code a{text-decoration:none}pre data-err{background:url("data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%206%203'%20enable-background%3D'new%200%200%206%203'%20height%3D'3'%20width%3D'6'%3E%3Cg%20fill%3D'%23c94824'%3E%3Cpolygon%20points%3D'5.5%2C0%202.5%2C3%201.1%2C3%204.1%2C0'%2F%3E%3Cpolygon%20points%3D'4%2C0%206%2C2%206%2C0.6%205.4%2C0'%2F%3E%3Cpolygon%20points%3D'0%2C2%201%2C3%202.4%2C3%200%2C0.6'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E") repeat-x bottom left;padding-bottom:3px}pre .query{margin-bottom:10px;color:#137998;display:inline-block}.line{padding-left:1rem;padding-right:1rem}pre .error,pre .error-behind{margin-left:-14px;margin-top:8px;margin-bottom:4px;padding:6px;padding-left:14px;width:calc(100% - 20px);white-space:pre-wrap;display:block}pre .error{position:absolute;background-color:#fee;border-left:2px solid #bf1818;display:flex;align-items:center;color:#000}pre .error .code{display:none}pre .error-behind{user-select:none;visibility:transparent;color:#fee}pre .arrow{background-color:#eee;position:relative;top:-7px;margin-left:.1rem;border-left:1px solid #eee;border-top:1px solid #eee;transform:translateY(25%) rotate(45deg);height:8px;width:8px}pre .popover{margin-bottom:10px;background-color:#eee;display:inline-block;padding:0 .5rem .3rem;margin-top:10px;border-radius:3px}pre .inline-completions ul.dropdown{display:inline-block;position:absolute;width:240px;background-color:#dcdcdc;color:gray;padding-top:4px;font-family:var(--code-font);font-size:.8rem;margin:0;padding:0;border-left:4px solid #4b9edd}pre .inline-completions ul.dropdown::before{background-color:#4b9edd;width:2px;position:absolute;top:-1.2rem;left:-3px;content:" "}pre .inline-completions ul.dropdown li{overflow-x:hidden;padding-left:4px;margin-bottom:4px}pre .inline-completions ul.dropdown li.deprecated{text-decoration:line-through}pre .inline-completions ul.dropdown li span.result-found{color:#4b9edd}pre .inline-completions ul.dropdown li span.result{width:100px;color:#000;display:inline-block}.dark-theme .markdown pre{background-color:#d8d8d8;border-color:#ddd;filter:invert(98%) hue-rotate(180deg)}data-lsp{border-bottom:1px dotted transparent;transition-timing-function:ease;transition:border-color .3s}@media(prefers-reduced-motion: reduce){data-lsp{transition:none}}pre .logger{display:flex;align-items:center;color:#000;padding:6px 6px 6px 8px;width:calc(100% - 19px);white-space:pre-wrap;margin-top:10px}pre .logger svg{margin-right:9px}pre .logger.error-log{background-color:#fee;color:#ff0b0b;border-left:1px solid #bf1818}pre .logger.warn-log{background-color:#ffe;border-left:1px solid #eae662}pre .logger.log-log{background-color:#f3f3f3;border-left:1px solid #f3f3f3}pre .logger.log-log svg{margin-left:6px;margin-right:9px}</style></head><body><div id="site-header"><div id="logo"><svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M50 0H0V50H50V0Z" fill="#FC7C00"></path><path d="M24.8278 36.4738H26.623C27.3823 36.4738 27.9442 36.2749 28.3087 35.877C28.6733 35.4791 28.8558 34.9262 28.8563 34.2182C28.8563 33.5759 28.6738 33.0614 28.3087 32.6746C27.9436 32.2878 27.4145 32.0944 26.7214 32.0944C26.123 32.0944 25.6204 32.2696 25.2135 32.6198C24.8066 32.9701 24.6021 33.4299 24.6 33.9992H21.5048L21.4825 33.9333C21.4386 32.6852 21.9167 31.6561 22.9167 30.846C23.9167 30.036 25.1574 29.631 26.6389 29.631C28.2881 29.631 29.6037 30.0251 30.5857 30.8135C31.5677 31.6018 32.0584 32.7259 32.0579 34.1857C32.0579 34.8794 31.8389 35.5381 31.4008 36.1619C30.9418 36.8035 30.3176 37.3087 29.5944 37.6238C30.4775 37.9376 31.1508 38.4193 31.6143 39.069C32.0778 39.7188 32.3095 40.4743 32.3095 41.3357C32.3095 42.7955 31.7786 43.9434 30.7167 44.7794C29.6548 45.6153 28.2942 46.0328 26.6349 46.0317C25.1534 46.0317 23.8815 45.6394 22.819 44.8548C21.7566 44.0701 21.2439 42.9624 21.281 41.5317L21.3032 41.4659H24.3984C24.391 41.75 24.4461 42.0322 24.5596 42.2928C24.6731 42.5533 24.8424 42.7858 25.0556 42.9738C25.4947 43.3722 26.0503 43.5714 26.7222 43.5714C27.4593 43.5714 28.0413 43.3675 28.4682 42.9595C28.8952 42.5516 29.1087 41.9981 29.1087 41.2992C29.1087 40.4616 28.8989 39.8481 28.4794 39.4587C28.0598 39.0693 27.4413 38.8746 26.6238 38.8746H24.8278V36.4738Z" fill="black"></path><path d="M25.223 15.1048H20.873V12.3468H32.7119V15.1048H28.3619V27.5937H25.223V15.1048Z" fill="black"></path><path d="M31.927 19.9707C31.927 15.4635 35.4024 12.1675 39.7746 12.1675C42.5325 12.1675 44.5055 13.154 45.8738 15.2841L43.4746 16.9881C42.7603 15.8222 41.5238 14.9929 39.7746 14.9929C37.0167 14.9929 35.1555 17.123 35.1555 19.9707C35.1555 22.8183 37.0167 24.9929 39.7746 24.9929C41.7476 24.9929 42.8468 24.0508 43.6984 22.7508L46.142 24.4326C44.819 26.4961 42.7111 27.7961 39.7738 27.7961C35.4032 27.7953 31.927 24.477 31.927 19.9707Z" fill="black"></path><path d="M39.3389 43.5714C40.178 43.5714 40.8624 43.2606 41.3921 42.6389C41.9217 42.0172 42.1862 41.1275 42.1857 39.9698V39.1817C41.8468 39.6204 41.4101 39.9737 40.9103 40.2135C40.4115 40.4456 39.8668 40.5625 39.3167 40.5556C37.8352 40.5556 36.669 40.072 35.8182 39.1048C34.9675 38.1376 34.5423 36.8291 34.5428 35.1794C34.5428 33.5884 35.0455 32.2656 36.0508 31.2111C37.0561 30.1566 38.337 29.6294 39.8936 29.6294C41.5212 29.6294 42.8423 30.1897 43.8571 31.3103C44.8719 32.431 45.3794 34.0058 45.3794 36.0349V39.8016C45.3794 41.736 44.8119 43.2579 43.677 44.3675C42.5421 45.477 41.095 46.0325 39.3357 46.0341C38.7604 46.0319 38.1866 45.9748 37.6222 45.8635C37.0599 45.7575 36.5111 45.5895 35.9857 45.3627L36.3579 43.0444C36.8134 43.2207 37.2846 43.3535 37.7651 43.4413C38.2848 43.5314 38.8114 43.575 39.3389 43.5714ZM39.8532 38.2175C40.3297 38.2283 40.8022 38.1272 41.2325 37.9222C41.6088 37.74 41.9355 37.4696 42.1849 37.1341V35.6635C42.1849 34.4958 41.9804 33.609 41.5714 33.0032C41.1624 32.3974 40.6069 32.0944 39.9048 32.0944C39.2624 32.0944 38.7386 32.3937 38.3333 32.9921C37.928 33.5905 37.7254 34.3204 37.7254 35.1817C37.7254 36.087 37.9106 36.8188 38.2809 37.377C38.6513 37.9352 39.1754 38.2143 39.8532 38.2143V38.2175Z" fill="black"></path></svg></div><div><h1>Types <em>// as Comments</em></h1><p>ECMAScript Proposal</p></div></div><hr/><div class="section two-thirds"><div class="one"><h4>Goal</h4></div><p class="two">Reserve a space for static type syntax inside the ECMAScript language. JavaScript engines would treat type syntax as comments.</p></div><div class="section split"><div><div class="code-sample"><h4 class="code-title">Before</h4><div><div class='tag-container'><pre class="shiki github-light twoslash lsp" style="background-color: #ffffff; color: #24292e"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5"><data-lsp lsp='const message: string' >message</data-lsp></span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #005CC5">string</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">"Hello, types"</span></div><div class='line'><span style="color: #24292E"><data-lsp lsp='var console: Console' >console</data-lsp>.</span><span style="color: #6F42C1"><data-lsp lsp='(method) Console.log(...data: any[]): void' >log</data-lsp></span><span style="color: #24292E">(<data-lsp lsp='const message: string' >message</data-lsp>)</span></div><div class='meta-line logger error-log'><svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.63018 1.29289L1.29289 4.63018C1.10536 4.81772 1 5.07207 1 5.33729V13.6627C1 13.9279 1.10536 14.1823 1.29289 14.3698L4.63018 17.7071C4.81772 17.8946 5.07207 18 5.33729 18H13.6627C13.9279 18 14.1823 17.8946 14.3698 17.7071L17.7071 14.3698C17.8946 14.1823 18 13.9279 18 13.6627V5.33729C18 5.07207 17.8946 4.81772 17.7071 4.63018L14.3698 1.29289C14.1823 1.10536 13.9279 1 13.6627 1H5.33729C5.07207 1 4.81772 1.10536 4.63018 1.29289Z" fill="#E72622" stroke="#E72622"/><rect x="8" y="4" width="3" height="7" fill="white"/><rect x="8" y="13" width="3" height="3" fill="white"/></svg><span class='message'>SyntaxError: Unexpected token ':'. const declared variable 'message' must have an initializer.</span></div></code></div></pre></div></div><span class="emoji" role="img" aria-label="explosion emoji to indicate the code failed">💥</span></div><p class="code-after">Runs with tools, crashes in a browser</p></div><div><div class="code-sample"><h4 class="code-title">After</h4><div><pre class="shiki github-light twoslash lsp" style="background-color: #ffffff; color: #24292e"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5"><data-lsp lsp='const message: string' >message</data-lsp></span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #005CC5">string</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">"Hello, types"</span></div><div class='line'><span style="color: #24292E"><data-lsp lsp='var console: Console' >console</data-lsp>.</span><span style="color: #6F42C1"><data-lsp lsp='(method) Console.log(...data: any[]): void' >log</data-lsp></span><span style="color: #24292E">(<data-lsp lsp='const message: string' >message</data-lsp>)</span></div></code></div></pre></div><span class="emoji" role="img" aria-label="tick to indicate it passed">✅</span></div><p class="code-after">Runs without tools, runs in a browser</p></div></div><p>The Types as Comments proposal aims to simplify working in a modern JavaScript codebases. With Types as Comments, developers can remove a build step from their apps, keeping TypeScript and Flow codebases aligned with JavaScript. This proposal does not precisely specify a type syntax, which provides innovative space for different type systems.</p><h2>How the proposal works</h2><aside>Note: this is a simplification of the overall Types as Comments proposal.</aside><div class="section split"><div class="code-sample"><div><div class='tag-container'><pre class="shiki github-light twoslash lsp" style="background-color: #ffffff; color: #24292e"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5"><data-lsp lsp='const message: "Hello, types"' >message</data-lsp></span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">"Hello, types"</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #6A737D">/* Echo the message */</span></div><div class='line'><span style="color: #24292E"><data-lsp lsp='var console: Console' >console</data-lsp>.</span><span style="color: #6F42C1"><data-lsp lsp='(method) Console.log(...data: any[]): void' >log</data-lsp></span><span style="color: #24292E">(<data-lsp lsp='const message: "Hello, types"' >message</data-lsp>)</span></div><div class='meta-line logger log-log'><svg width="12" height="15" viewBox="0 0 12 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.76822 0.359816C5.41466 -0.0644613 4.78409 -0.121785 4.35982 0.231779C3.93554 0.585343 3.87821 1.21591 4.23178 1.64018L5.76822 0.359816ZM10 7L10.7926 7.60971L11.2809 6.97499L10.7682 6.35982L10 7ZM4.20738 12.8903C3.87064 13.328 3.95254 13.9559 4.39029 14.2926C4.82804 14.6294 5.45589 14.5475 5.79262 14.1097L4.20738 12.8903ZM4.23178 1.64018L9.23178 7.64018L10.7682 6.35982L5.76822 0.359816L4.23178 1.64018ZM9.20738 6.39029L4.20738 12.8903L5.79262 14.1097L10.7926 7.60971L9.20738 6.39029Z" fill="#BDBDBD"/><line y1="3.5" x2="4" y2="3.5" stroke="#BDBDBD"/><path d="M0 7H4" stroke="#BDBDBD"/><line y1="10.5" x2="4" y2="10.5" stroke="#BDBDBD"/></svg><span class='message'>Hello, types</span></div></code></div></pre></div></div></div><div><p>Today, a JavaScript engine knows that a slash and a star (<code>/*</code>) indicates the start of a multi-line comment.</p><p>To the engine, this roughly means: <em>&quot;from this point in the code, keep reading characters and ignore them until you find a star with a slash right after <code>*/</code>&quot;</em>.</p></div></div><div class="section split"><div class="code-sample"><div><div class='tag-container'><pre class="shiki github-light twoslash lsp" style="background-color: #ffffff; color: #24292e"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5"><data-lsp lsp='const message: string' >message</data-lsp></span><span style="color: #D73A49">:</span><span style="color: #24292E"> </span><span style="color: #005CC5">string</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">"Hello, types"</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #6A737D">/* Echo the message */</span></div><div class='line'><span style="color: #24292E"><data-lsp lsp='var console: Console' >console</data-lsp>.</span><span style="color: #6F42C1"><data-lsp lsp='(method) Console.log(...data: any[]): void' >log</data-lsp></span><span style="color: #24292E">(<data-lsp lsp='const message: string' >message</data-lsp>)</span></div><div class='meta-line logger log-log'><svg width="12" height="15" viewBox="0 0 12 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.76822 0.359816C5.41466 -0.0644613 4.78409 -0.121785 4.35982 0.231779C3.93554 0.585343 3.87821 1.21591 4.23178 1.64018L5.76822 0.359816ZM10 7L10.7926 7.60971L11.2809 6.97499L10.7682 6.35982L10 7ZM4.20738 12.8903C3.87064 13.328 3.95254 13.9559 4.39029 14.2926C4.82804 14.6294 5.45589 14.5475 5.79262 14.1097L4.20738 12.8903ZM4.23178 1.64018L9.23178 7.64018L10.7682 6.35982L5.76822 0.359816L4.23178 1.64018ZM9.20738 6.39029L4.20738 12.8903L5.79262 14.1097L10.7926 7.60971L9.20738 6.39029Z" fill="#BDBDBD"/><line y1="3.5" x2="4" y2="3.5" stroke="#BDBDBD"/><path d="M0 7H4" stroke="#BDBDBD"/><line y1="10.5" x2="4" y2="10.5" stroke="#BDBDBD"/></svg><span class='message'>Hello, types</span></div></code></div></pre></div></div></div><div><p>For the simplest case, the same idea could be applied to an engine which implements Type as Comments.</p><p>If the engine has just seen an variable like <code>message</code> and the next character is a colon (<code>:</code>), then treat the colon (<code>:</code>) and certain pieces of code after (&#x27;<code>: string</code>&#x27;) as a comment.</p><p>In this case, once an engine would hit the <code>=</code> charater, it would stop interpreting the code as comments and read the initializer of <code>message</code>.</p></div></div><div class="section  one-column-center"><p><em>To the JavaScript runtime, the runtime code would look like this:</em></p><div class="highlight-remove"><div class="code-sample"><div><div class='tag-container'><pre class="shiki github-light twoslash lsp" style="background-color: #ffffff; color: #24292e"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5"><data-lsp lsp='const message: "Hello, types"' >message</data-lsp></span><span style="color: #24292E">         </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">"Hello, types"</span></div><div class='line'>&nbsp;</div><div class='line'>&nbsp;</div><div class='line'><span style="color: #24292E"><data-lsp lsp='var console: Console' >console</data-lsp>.</span><span style="color: #6F42C1"><data-lsp lsp='(method) Console.log(...data: any[]): void' >log</data-lsp></span><span style="color: #24292E">(<data-lsp lsp='const message: "Hello, types"' >message</data-lsp>)</span></div><div class='meta-line logger log-log'><svg width="12" height="15" viewBox="0 0 12 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.76822 0.359816C5.41466 -0.0644613 4.78409 -0.121785 4.35982 0.231779C3.93554 0.585343 3.87821 1.21591 4.23178 1.64018L5.76822 0.359816ZM10 7L10.7926 7.60971L11.2809 6.97499L10.7682 6.35982L10 7ZM4.20738 12.8903C3.87064 13.328 3.95254 13.9559 4.39029 14.2926C4.82804 14.6294 5.45589 14.5475 5.79262 14.1097L4.20738 12.8903ZM4.23178 1.64018L9.23178 7.64018L10.7682 6.35982L5.76822 0.359816L4.23178 1.64018ZM9.20738 6.39029L4.20738 12.8903L5.79262 14.1097L10.7926 7.60971L9.20738 6.39029Z" fill="#BDBDBD"/><line y1="3.5" x2="4" y2="3.5" stroke="#BDBDBD"/><path d="M0 7H4" stroke="#BDBDBD"/><line y1="10.5" x2="4" y2="10.5" stroke="#BDBDBD"/></svg><span class='message'>Hello, types</span></div></code></div></pre></div></div></div><p>The underlying implementation would need to be a bit more complex than that. For example, to handle things like object type literals (<code>{ id: string }</code>) an engine would keep track of open and close braces.</p><p>The goal of the proposal is to provide a way to describe how to safely ignore type-like code inside the JavaScript language.</p></div></div><h2>Who benefits?</h2><div class="section split"><article><h4>JavaScript and TypeScript Users</h4><p>Less need for source code transformation in modern JavaScript projects.</p><p>Cleaner and more powerful syntax than JSDoc comments.</p><p>Pasting typed code into consoles and REPLs just works.</p></article><article><h4>Tool Makers</h4><p>New experimental type systems can be built using the ignored syntax space.</p><p>Existing JavaScript tools can:</p><ul><li>Skip source-code changes</li><li>Reduce the need for sourcemaps</li><li>Simplify file resolvers</li><li>Use one parsing strategy</li></ul></article><article><h4>Engine Maintainers</h4><p>Browser engines do not pay any type-checking cost at runtime.</p><p>Engine maintainers avoid the burden of parser upgrades as each type system evolves.</p></article></div><h2>Frequently Asked Questions</h2><aside>There is a comprehensive FAQ in the proposal itself, but these Q&amp;As I expect cover most JS users questions.</aside><div class="section  faq"><div><div class="question">What type syntax is proposed?</div><p>Type definitions on functions and variable declarations, import/exporting types, class field and methods, generics, type assertions, <code>this</code> parameters, and more.</p></div><div><div class="question">Will JavaScript engines perform type-checking?</div><p>No, the goal is to let projects like TypeScript, Flow, and others provide the type system and check the code for type errors. JavaScript would only reserve a space in the JavaScript syntax for their type syntax to exist.</p></div><div><div class="question">Will adding types slow down my JavaScript programs?</div><p>Like any new JavaScript feature, it would have performance trade-offs, and there is some amount of parsing that would be required; however the performance here should be relatively small as these types just act as comments.</p><p>In short, no.</p></div><div><div class="question">Will this grow JavaScript bundle sizes?</div><p>It could, but if you are currently bundling and using type syntax, types are already being removed during that bundling process. Most existing tools could continue to strip away types, or delegate the task to optimizers/minifiers..</p><p>JavaScript files without a build-step would have more characters as a result of the types. This is the same trade-off as adding comments to files, and the same solutions apply (e.g. use a minifier).</p></div><div><div class="question">How does this differ from JSDoc support?</div><p>Today JavaScript users can write JSDoc comments and have them checked by TypeScript or Closure Compiler.</p><p>The syntax for JSDoc support is more verbose than type syntax, and is less ergonomic for complex typing. With this proposal, you can get the JSDoc-like &quot;works without build tools&quot; experience without the constraints of JSDoc comments.</p></div><div><div class="question">Does this proposal favor TypeScript?</div><p>The proposal favors TypeScript/Flow-like syntax inside JavaScript, and is strongly influenced by syntax which is common to both language extensions. The aim is to also leave the door open for new syntax extensions which haven&#x27;t been anticipated yet.</p><p>That said, the language in this specification favours TypeScript as it is the most popular type-system, but nearly all of the proposed syntax spaces would benefit Flow users too.</p></div><div><div class="question">Is there prior art?</div><p>Python similarly implements support for opt-in type-checking. However this proposal has a stronger stance of relying solely on type erasure. Ruby is quite similar too.</p></div><div><div class="question">Will this slow down JavaScript&#x27;s evolution?</div><p>JavaScript&#x27;s backwards compatibility goals of never breaking old code means that this is something future JavaScript syntax improvements would need to take into account. It is unlikely to get in the way of most new syntax however, as it is a strictly specified gap in the language instead of code which runs.</p></div><div><div class="question">How does this affect runtime error messaging?</div><p>At most, the only new errors that an engine could issue are <code>SyntaxError</code>s. In some cases, the Types as Comments leaves a lot of room for invalid-<em>looking</em> syntax, but which is actually fine.</p><p>For example, this syntax would be expected to error in TypeScript or Flow, but would be accepted by a JavaScript engine.:</p><div class="code-sample"><div><pre class="shiki github-light" style="background-color: #ffffff; color: #24292e"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5">message</span><span style="color: #D73A49">:</span><span style="color: #24292E"> { </span><span style="color: #E36209">abc</span><span style="color: #D73A49">=</span><span style="color: #005CC5">123</span><span style="color: #24292E"> } </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">"Hello, types"</span></div></code></div></pre></div></div><p>On the other hand, the Types as Comments proposal does have some expectations around type syntax, and ill-formatted types at the top level of an annotation might have issues.</p><div class="code-sample"><div><div class='tag-container'><pre class="shiki github-light twoslash lsp" style="background-color: #ffffff; color: #24292e"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #D73A49">const</span><span style="color: #24292E"> </span><span style="color: #005CC5"><data-lsp lsp='const message: any' >message</data-lsp></span><span style="color: #D73A49">:</span><span style="color: #24292E"> !!@@</span><span style="color: #E36209"><data-lsp lsp='any' >hello</data-lsp></span><span style="color: #24292E">@@<data-lsp lsp='any' ></data-lsp>!! </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #032F62">"Hello, types"</span></div><div class='meta-line logger error-log'><svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.63018 1.29289L1.29289 4.63018C1.10536 4.81772 1 5.07207 1 5.33729V13.6627C1 13.9279 1.10536 14.1823 1.29289 14.3698L4.63018 17.7071C4.81772 17.8946 5.07207 18 5.33729 18H13.6627C13.9279 18 14.1823 17.8946 14.3698 17.7071L17.7071 14.3698C17.8946 14.1823 18 13.9279 18 13.6627V5.33729C18 5.07207 17.8946 4.81772 17.7071 4.63018L14.3698 1.29289C14.1823 1.10536 13.9279 1 13.6627 1H5.33729C5.07207 1 4.81772 1.10536 4.63018 1.29289Z" fill="#E72622" stroke="#E72622"/><rect x="8" y="4" width="3" height="7" fill="white"/><rect x="8" y="13" width="3" height="3" fill="white"/></svg><span class='message'>SyntaxError</span></div></code></div></pre></div></div></div><p>While there would be some restrictions on type syntax, the proposal leaves type space errors to the IDE and type checker to report when certain types are invalid.</p></div><div><div class="question">I&#x27;m new, what are these terms?</div><p>JavaScript is a language which does not provide a way to declare the input/outputs of your code. For example, in JavaScript a variable can be set to a string, a number, an object, and more.</p><p>JavaScript extensions like TypeScript and Flow exist to add new syntax which have a way to state that &quot;this variable should only ever hold a string.&quot;</p><p>The value in adding this syntax is that tooling can make better assumptions about how your code works, and let you know when something might go wrong. That tooling can live in your editor, or be a command-line app.</p><p>The process of verifying these assumptions is called type checking, and for JavaScript there are different type checkers with different trade-offs about how JavaScript code can be validated.</p><p>Prior to this proposal, you needed a tool like Babel or TypeScript to remove these types, but if this proposal is accepted, you won&#x27;t need a build tool to remove them.</p><p>Removing this step can help simplify working in JavaScript projects to the point where you may not need any build tooling at all.</p></div><div><div class="question">What does the grammar look like?</div><p>You can read the <a href="https://tc39.github.io/proposal-type-annotations/grammar.html">grammar spec here</a> and <a href="https://github.com/tc39/proposal-type-annotations/blob/master/syntax/grammar-ideas.md">notes for implementation</a> inside the repo.</p></div></div><h2>Frequently Asked Questions about TypeScript</h2><aside>Note: There is also <a href="https://devblogs.microsoft.com/typescript/a-proposal-for-type-syntax-in-javascript/">a TypeScript Blog Post</a> on the topic.</aside><div class="section  faq"><div><div class="question">Will all of TypeScript be supported by this proposal?</div><p>No, not all of today&#x27;s TypeScript syntax would be supported by this proposal. This is similar to how Babel support for TypeScript does not support all of the existing TypeScript syntax. </p><p>For example enums, namespaces and class parameter properties are unlikely to be supported. In addition, specifying type arguments at function call-sites will require a slightly different syntax.</p></div><div><div class="question">How would I convert my TypeScript codebase to JavaScript with Types as Comments?</div><p>It&#x27;s possible that TypeScript would introduce an option to ensure that your code is compatible with Types as Comments.</p><p>Teams could incrementally migrate by addressing each reported error as necessary. When no new errors are reported, <code>.ts</code> file extensions could be replaced with <code>.js</code> and the migration would be done.</p></div><div><div class="question">How does this differ from JSDoc support?</div><p>JSDoc solves the same problem as this proposal by putting the type information inside existing comments! Given the constraint of not being able to change the JavaScript language, this was the best compromise to introduce type-checking in plain JavaScript.</p><p>This proposal removes that constraint and changes the JavaScript language to permit syntax that can be used for types. This proposal allows you to have the cake (&quot;It&#x27;s just JavaScript&quot;) and eat it too (&quot;I want to check the types&quot;). You get all the benefits of TypeScript&#x27;s JSDoc support, but without the awkward syntax.</p></div><div><div class="question">Do I need to migrate?</div><p>No. TypeScript has backwards compatibility guarantees which means that you can continue to use `.ts` and `.tsx` files for TypeScript. Your code that works today will continue to work tomorrow.</p><p>In fact, given how new this proposal is, we strongly advise not to rewrite existing code as it would be premature.</p></div></div><h2>Links</h2><aside>This page is a simpler overview of Types as Comments, to learn more about the proposal consult the GitHub repo.</aside><div class="section split"><a class="button" href="https://github.com/tc39/proposal-type-annotations#motivation"><h5>Motivations</h5><p>How does this proposal improve the JavaScript ecosystem as a whole?</p></a><a class="button" href="https://github.com/tc39/proposal-type-annotations#proposal"><h5>Supported Syntax</h5><p>From types definitions to class properties, see all the proposed supported type-level syntax.</p></a><a class="button" href="https://github.com/tc39/proposal-type-annotations#FAQ"><h5>Frequently Asked Questions</h5><p>How does this proposal relate to TypeScript or Flow support? and many other questions.</p></a></div></body></html>